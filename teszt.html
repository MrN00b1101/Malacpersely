
<div id="lista"></div>
<script>
function newUser(){
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.open("POST", "phpApi.php", true);
    xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");


    xmlhttp.onload = function () {
        var users = JSON.parse(xmlhttp.responseText);
        if (xmlhttp.readyState == 4 && xmlhttp.status == "1") {
            alert(xmlhttp.status_message);
        } else {
            alert(xmlhttp.status_message);
        }
    }

    xmlhttp.send(JSON.stringify(
        { 
    "com": "user",
    "name": "JavaScriptU",
    "mail": "java@script.hu",
    "pass": "jelszo",
    }));
}
function getusers(){
var request = new XMLHttpRequest()

// Open a new conne
request.open('GET', 'phpApi.php?com=user', true)

request.onload = function() {
    var obj = JSON.parse(request.response);
    //alert(obj.length);
    var lista = document.getElementById("lista");
    for(i=0; i< obj.length;i++){
    lista.innerHTML =lista.innerHTML+"Nev: "+obj[i].Name+" |Email: "+obj[i].Mail+" |Id: "+obj[i].Id+" |Csalad Id: "+obj[i].FamilyId+"<br>";
    }
    //    alert(obj[2].Name);        
        

}
// Send request
request.send()
}

function login(){
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.open("POST", "phpApi.php", true);
    xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");


    xmlhttp.onload = function () {
        var users = JSON.parse(xmlhttp.responseText);
        if (xmlhttp.readyState == 4 && xmlhttp.status == "1") {
            alert(xmlhttp.status_message);
        } else {
            alert(xmlhttp.status_message);
        }
    }

    xmlhttp.send(JSON.stringify(
        { 
    "com": "login",
    "Mail": "valami",
    "password": "dd"
     }));
}
function getCookie(cname) {
  var name = cname + "=";
  var decodedCookie = decodeURIComponent(document.cookie);
  var ca = decodedCookie.split(';');
  for(var i = 0; i <ca.length; i++) {
    var c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}
function getTranList(){
   /* var request = new XMLHttpRequest()


    request.open('GET', 'phpApi.php?com=user', true)

    request.onload = function() {
    var obj = JSON.parse(request.response);
    //alert(obj.length);
    var lista = document.getElementById("lista");
    for(i=0; i< obj.length;i++){
    lista.innerHTML =lista.innerHTML+"Nev: "+obj[i].Name+" |Email: "+obj[i].Mail+" |Id: "+obj[i].Id+" |Csalad Id: "+obj[i].FamilyId+"<br>";
    }
    //    alert(obj[2].Name);        
        

}
// Send request
request.send()*/
alert(getCookie("Token"));
}
</script>
<button onclick="newUser();">Uj felhasznalo</button>
<button onclick="getusers();">Felhasznalok listaja!</button>
<button onClick="login();">Login</button>
<button onClick="getTranList()">TranList</button>
